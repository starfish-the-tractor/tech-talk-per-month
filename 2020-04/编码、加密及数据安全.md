---
title: 编码、加密及数据安全
author: '@azurity'
config:
    loop: false
style-config:
    auto-invert: false
highlight-theme: 'https://cdn.bootcss.com/highlight.js/9.15.10/styles/solarized-dark.min.css'
---
<slide/>
# 编码、加密及数据安全

<slide/>
# Part 1: 编码

<slide/>
编码的主要目的是为了限制实际出现的字符，保证在过程中使用的字符在合理范围内。

许多编码只包含可打印字符
- base64
- Quoted-printable(邮件中常用)

<slide/>
超出范围的数据往往是出现安全问题的点:

- [SQL宽字符注入](https://blog.csdn.net/auuuuuuuu/article/details/79592682)
- utf-8和utf8mb4: unicode范围拓展导致的安全隐患，（unicode平面）

**无法保证直接bin传输安全的情况下，应当编码到合适的情况**

<slide/>
逻辑上的漏洞:

请注意编码与进行安全过滤的顺序，请在**解码后**再进行过滤，通过编码绕过过滤是常识

- [实体编码XSS](https://xss.haozi.me/#/0x04)

<slide/>
# Part 2: 加密

<slide/>
# **什么是加密?**

存在一个(一对)算法(难题/函数)，使得:
- 正向算法接受一个数据(明文)和一个密钥(加密密钥)，生成另一组数据(密文)
- 反向算法接受密文，并得到明文
- 正向的算法易于计算
- 在没有密钥(解密密钥)的情况下，算法**难以**反向计算
- 在给出(解密密钥)的情况下，可以简单的执行反向算法

<slide/>
**加密主要包括:**

- 对称加密
- 非对称加密(公钥加密)

古典加密因为不能抵抗统计攻击，认为只是特殊编码方式

<slide/>
# 对称加密

有着易于计算的有点，但是不能在双方不知道**完整密钥**的情况下进行。

以`DES`为代表，常见加密算法:
- DES
- AES
- 3DES
- SM4

对称加密的安全性依赖于密钥长度，请注意选择密钥长度足够的加密算法

<slide/>
# 非对称加密

此时，加密密钥与解密密钥不同，可以不交换完整密钥来进行加密。

一般情况下，依赖于一个**数学难题**，其暴力破解难度极大(指数级或亚指数级)。

安全性与难题难度有关。

常见算法:
- RSA (大数的质数分解问题，亚指数级)
- ECC (离散的椭圆曲线计算，指数级)

<slide/>
## 密钥交换

> **油漆桶原理**

<slide/>
## 中间人攻击

<slide/>
## 预防中间人攻击: 证书与CA

<slide/>
## 反向的非对称加密: 签名

可以保证来源的唯一性

<slide/>
# Part 3: 数据安全

<slide/>
## 场景一: 身份认证

- 此时，安全的信道是必须的
- 敏感数据应当维持在同一个信道内，不应当切换信道(尤其只第三方授权情况)
- 合理控制令牌/授权时间，降低泄露风险
- 预防令牌/授权，泄漏情况
- 如有必要，应当和信道绑定

<slide/>
## 场景二: 敏感数据存储

- 有备无患: 永远认为数据可能泄漏
- 敏感数据应当加密
- 警惕DOS攻击: 减少不必要的加密流程

<slide/>
## 综合示例: 密码的存储及校验

*这是个题目*😃

<slide/>
### 我的实践

- 密码合理HASH存储(不使用加密存储，因为HASH碰撞概率足够低)
- TLS: 安全信道进行授权
- 后端计算HASH: 必须使用密码而不是HASH登录，数据库泄漏短时间内无严重影响
- 传输过程随意，不推荐使用加密(与TLS重复)，HASH无所谓
